function getURLString(e,t,o){return t.set("source",o),e.searchParams.set("referrer",t.toString()),e.toString()}function getRedirectUrl(e){const t=new URL(CONTENT_BLOCK_REDIRECT_URL);t.searchParams.set("redirectUrl",window.location.href);const o=new URLSearchParams({mx_Campaign_Type:"content-blocker",SourceMedium:"website",Website:window.location.href,Website_URL:window.location.href,mx_Page_Category:INSTANCE_NAME&&""!==INSTANCE_NAME?INSTANCE_NAME:window.location.pathname.split("/")[1],Platform:navigator.isMobile?"website_mobile":"website_desktop",Lead_Magnet_Type:"CONTENT_BLOCKER",Device_Details:navigator.detectDeviceAgent?navigator.detectDeviceAgent:""});return{bottom_blocker_redirect_url:getURLString(t,o,e),blocker_progress_indicator_redirect_url:getURLString(t,o,"Login_Information_Block")}}function trackerData(){try{return JSON.parse(CONTENT_BLOCK_TRACKER)}catch(e){return null}}function sendViewBeacon(e,t,o){e&&t&&o&&navigator.sendBeacon(`${ADTECH_HOST}/revive/www/delivery/lg.php?bannerid=${e}&campaignid=${o}&zoneid=${t}`)}function sendClickBeacon(e,t){e&&t&&navigator.sendBeacon(`${ADTECH_HOST}/revive/www/delivery/cl.php?bannerid=${e}&zoneid=${t}`)}const IP_API=`${COMMON_UTILS_ENDPOINT_KEY}wp/get-ip-location-details`,CONTENT_BLOCKER_HTML_API=new URL(`${BASE_URL}wp-json/spidy/v1/content_blocker/?wp-json_allow`);!async function(){if(localStorage.getItem("learn_portal_user"))return;let e,t=localStorage.getItem("CB_VIEW_COUNT");if(t)try{const e=Math.min(parseInt(t)+1,999);localStorage.setItem("CB_VIEW_COUNT",`${e}`),t=`${e}`}catch(e){}else localStorage.setItem("CB_VIEW_COUNT","1"),t="1";try{e=await fetch(IP_API)}catch(e){}if(!e||!e.ok)return;const o=await e.json();if(!o.success)return;const n=o.ipLocationDetailsData.region;let r;try{CONTENT_BLOCKER_HTML_API.searchParams.set("region",n),CONTENT_BLOCKER_HTML_API.searchParams.set("CB_VIEW_COUNT",t),r=await fetch(CONTENT_BLOCKER_HTML_API.toString())}catch(e){}if(!r||!r.ok)return;const i=await r.json();if(!i.success)return;const c=trackerData(),a=document.querySelector("div#content-blocker-top"),s=document.querySelector("div#content-blocker-bottom-section");a&&(a.innerHTML=i.progress_indicator),c&&""!==i.progress_indicator&&sendViewBeacon(c.bannerid.info,c.zoneid.info,c.campaignid.info),s&&(s.innerHTML=i.bottom_blocker),c&&""!==i.bottom_blocker&&!i.is_hard_block&&sendViewBeacon(c.bannerid.soft,c.zoneid.soft,c.campaignid.soft),c&&""!==i.bottom_blocker&&i.is_hard_block&&sendViewBeacon(c.bannerid.hard,c.zoneid.hard,c.campaignid.hard);const l=i.blocker_source,d=getRedirectUrl(l||"");i.bottom_blocker&&document.body.classList.add("block-scroll"),i.bottom_blocker&&(s.style.display="initial"),document.querySelectorAll("div.content-blocker-bottom-skip-text").forEach((e=>e.addEventListener("click",(()=>{i.bottom_blocker&&(s.style.display="none"),document.body.classList.remove("block-scroll")})))),document.querySelectorAll("a.content-blocker-bottom-button").forEach((e=>{e.setAttribute("href",d.bottom_blocker_redirect_url),e.addEventListener("click",(()=>{c&&(i.is_hard_block||sendClickBeacon(c.bannerid.soft,c.zoneid.soft),i.is_hard_block&&sendClickBeacon(c.bannerid.hard,c.zoneid.hard))}))})),document.querySelectorAll("a.content-blocker-top-link").forEach((e=>{e.setAttribute("href",d.blocker_progress_indicator_redirect_url),e.addEventListener("click",(()=>{c&&sendClickBeacon(c.bannerid.info,c.zoneid.info)}))}))}();